{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/main.js","../src/js/pixabay-api.js"],"sourcesContent":["export function renderImages(posts) {\n    const gallery = document.querySelector(\".gallery\");\n    const fetchBtn = document.querySelector(\".fetchButton\")\n    fetchBtn.style.display = \"block\"\n    const markUp = posts.map((image) => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img \n                    class=\"gallery-image\" \n                    src=\"${image.webformatURL}\" \n                    alt=\"${image.tags}\" \n                />\n            </a>\n            <div class=\"gallery-container\">\n            <p class=\"gallery-text\">Likes: <span class=\"gallery-span\">${image.likes}</span></p>\n            <p class=\"gallery-text\">Views: <span class=\"gallery-span\">${image.views}</span></p>\n            <p class=\"gallery-text\">Comments: <span class=\"gallery-span\">${image.comments}</span></p>\n            <p class=\"gallery-text\">Downloads: <span class=\"gallery-span\">${image.downloads}</span></p>\n            </div>\n        </li>\n    `).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markUp);\n    \n}","import SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\nlightbox.refresh();\nexport default lightbox;","import iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { renderImages } from './render-functions';\nimport lightbox from \"../main\";\nimport axios from 'axios';\n\n\nconst API_KEY = \"47343073-38824ad25c719e3c94b2dfcbe\";\nconst btn = document.querySelector(\".button\");\nconst inp = document.querySelector(\".input\");\nconst loadingElement = document.getElementById(\"loading\");\nconst gallery = document.querySelector(\".gallery\");\nconst fetchBtn = document.querySelector(\".fetchButton\")\n\nlet page = 1\nlet perPage = 15;\nbtn.addEventListener(\"click\", async (e) => {\n    e.preventDefault();\n    btn.disabled = true;\n    let posts\n    try {\n        fetchBtn.style.display = \"none\"\n        gallery.innerHTML = \"\";\n        page = 1;\n        posts = await fetchPosts();\n        \n    } catch (error) {\n        console.log(error);\n    }\n    finally {\n        if (posts) {\n            const maxPage = Math.ceil(posts.totalHits / perPage);\n            if (page >= maxPage) {\n                fetchBtn.style.display = \"none\";\n            } else {\n                fetchBtn.style.display = \"block\";\n            }\n        }\n        btn.disabled = false;\n    }\n\n    });\nfetchBtn.addEventListener(\"click\", async (e) => {\n    e.preventDefault();\n    fetchBtn.disabled = true;\n    try {\n        fetchBtn.style.display = \"none\"\n        page += 1\n        const posts = await fetchPosts();\n        const maxPage = Math.ceil(posts.totalHits / 15);\n        if (page >= maxPage) {\n            iziToast.info({\n                title: \"Hint\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n                \n        \n            });\n            fetchBtn.style.display = \"none\"\n            return\n        }\n        const firstCard = gallery.firstElementChild;\n            if (firstCard) {\n                const { height: cardHeight } = firstCard.getBoundingClientRect();\n                window.scrollBy({\n                    top: cardHeight * 2,\n                    behavior: 'smooth',\n                });\n            }\n        \n    } catch (error) {\n        console.log(error);\n    } finally {\n        fetchBtn.disabled = false;\n    }\n     });\n    \nasync function fetchPosts() {\n    const query = inp.value.trim();\n    if (!query) {\n        iziToast.warning({\n            title: \"Hint\",\n            message: \"Try to enter something into the input...\",\n        });\n        return;\n    }\n    const searchParams = new URLSearchParams({\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage,\n    });\n    try {\n        loadingElement.style.display = \"block\";\n        const { data } = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n        if (data.hits.length === 0) {\n            loadingElement.style.display = \"none\"\n            iziToast.error({\n                title: \"Error\",\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n            });\n            \n            return;\n        }\n\n        loadingElement.style.display = \"none\";\n        renderImages(data.hits); \n        lightbox.refresh();\n        return data;\n        \n    } catch (error) {\n        loadingElement.style.display = \"none\";\n        iziToast.error({\n            title: \"Error\",\n            message: `Something went wrong: ${error.message}`,\n        });\n        console.error(\"Fetch error:\", error);\n        return;\n    }\n}\n\n "],"names":["renderImages","posts","gallery","fetchBtn","markUp","image","lightbox","SimpleLightbox","API_KEY","btn","inp","loadingElement","page","perPage","e","fetchPosts","error","maxPage","iziToast","firstCard","cardHeight","query","searchParams","data","axios"],"mappings":"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"}